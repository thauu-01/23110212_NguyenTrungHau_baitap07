<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
    <head layout:fragment="head">
        <title th:text="#{category.list}">Danh sách</title>
    </head>
    <body>
        <div layout:fragment="content">
            <h2 th:text="#{category.list}">Danh sách Danh mục</h2>
            <form th:action="@{/categories}" method="get" class="mb-3">
                <input type="text" th:field="*{keyword}" th:value="${keyword}" placeholder="Tìm kiếm..." class="form-control d-inline w-25">
                <button type="submit" class="btn btn-primary" th:text="#{category.search}">Tìm</button>
            </form>
            <a th:href="@{/categories/add}" class="btn btn-success mb-3" th:text="#{category.add}">Thêm</a>
            <table class="table">
                <thead><tr><th>ID</th><th th:text="#{category.name}">Tên</th><th th:text="#{category.description}">Mô tả</th><th>Hành động</th></tr></thead>
                <tbody>
                    <tr th:each="cat : ${categories}">
                        <td th:text="${cat.id}"></td>
                        <td th:text="${cat.name}"></td>
                        <td th:text="${cat.description}"></td>
                        <td>
                            <a th:href="@{/categories/edit/{id}(id=${cat.id})}" class="btn btn-warning" th:text="#{category.edit}">Sửa</a>
                            <a th:href="@{/categories/delete/{id}(id=${cat.id})}" class="btn btn-danger" th:text="#{category.delete}" onclick="return confirm('Xóa?')">Xóa</a>
                        </td>
                    </tr>
                </tbody>
            </table>
            <!-- Paging -->
            <nav>
                <ul class="pagination">
                    <li class="page-item" th:classappend="${currentPage == 0} ? 'disabled'">
                        <a class="page-link" th:href="@{/categories(page=${currentPage - 1}, keyword=${keyword})}">Trước</a>
                    </li>
                    <li th:each="i : ${#numbers.sequence(0, totalPages - 1)}" class="page-item"
                        th:classappend="${i == currentPage} ? 'active'">
                        <a class="page-link" th:href="@{/categories(page=${i}, keyword=${keyword})}" th:text="${i + 1}"></a>
                    </li>
                    <li class="page-item" th:classappend="${currentPage == totalPages - 1} ? 'disabled'">
                        <a class="page-link" th:href="@{/categories(page=${currentPage + 1}, keyword=${keyword})}">Sau</a>
                    </li>
                </ul>
            </nav>
        </div>
    </body>
</html>